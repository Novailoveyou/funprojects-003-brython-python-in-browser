<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.9.2/brython.min.js"
			integrity="sha512-vZbQ0CAHrWkDIyn3VQejez+lxdSvsWuJhrWQVK+g+U3oQ3TM9K63rAwbI+iODLLNbnPkz3qzKkxGyD8PMhViPw=="
			crossorigin="anonymous"
		></script>

		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.9.2/brython_stdlib.js"
			integrity="sha512-8v5P2rP/lUaH7is/+Zw/mW0iqBDERyUNQZuw+tEpip2E9TNcFl1u19PYXpTIkwdiPnCEV55Vr3o2nQ70rP2HnQ=="
			crossorigin="anonymous"
		></script>

		<title>Brython | Python In The Browser</title>
	</head>
	<body onload="brython()">
		<h1>Brython Crash Course</h1>

		<h2 id="txt-hello"></h2>
		<button id="btn-alert">Alert & Insert</button>

		<input type="text" id="text" placeholder="Enter something" />
		<span id="output"></span>

		<h2 id="txt-greet">Hello {name}</h2>

		<button id="btn-joke">Get Joke</button>
		<div id="joke" class="card">Click the 'get joke' btn</div>

		<input type="file" id="file-upload" />
		<br />
		<textarea id="file-text" cols="60" rows="10"></textarea>

		<!-- Clg & DOM Insert -->
		<script type="text/python" id="script0">
			from browser import document, console, alert

			def show(e):
				console.log('Hello')
				document['txt-hello'] <= 'Hello world'

			document['btn-alert'].bind('click', show)
		</script>

		<!-- Text bind -->
		<script type="text/python" id="script1">
			from browser import document, console

			def show_text(e):
				console.log(e.target.value)
				document['output'].textContent = e.target.value

			document['text'].bind('input', show_text)
		</script>

		<!-- Template and variable -->
		<script type="text/python" id="script2">
			from browser import document
			from browser.template import Template

			Template(document['txt-greet']).render(name='Nover')
		</script>

		<!-- Ajax call -->
		<script type="text/python" id="script3">
			from browser import document, ajax

			url = 'https://api.chucknorris.io/jokes/random'

			def on_complete(req):
				import json
				data = json.loads(req.responseText)
				joke = data['value']
				document['joke'].text = joke

			def get_joke(e):
				req = ajax.ajax()
				req.open('GET', url, True)
				req.bind('complete', on_complete)
				document['joke'].text = 'Loading...'
				req.send()

			document['btn-joke'].bind('click', get_joke)
		</script>

		<!-- Load file data -->
		<script type="text/python" id="script4">
			from browser import document, window

			def file_read(e):
				def onload(e):
					document['file-text'].value = e.target.result

				file = document['file-upload'].files[0]
				reader = window.FileReader.new()
				reader.readAsText(file)
				reader.bind('load', onload)

			document['file-upload'].bind('input', file_read)
		</script>
	</body>
</html>
